<!DOCTYPE html>
<html>
<head>
	<title>발주서</title>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />

	<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
	<style type="text/css">
		#tabs-left {
			position: relative;
			padding-left: 6.5em;
		}
		#tabs-left .ui-tabs-nav {
			position: absolute;
			left: 0.25em;
			top: 0.25em;
			bottom: 0.25em;
			width: 6em;
			padding: 0.2em 0 0.2em 0.2em;
		}
		#tabs-left .ui-tabs-nav li {
			right: 1px;
			width: 100%;
			border-right: none;
			border-bottom-width: 1px !important;
			-moz-border-radius: 4px 0px 0px 4px;
			-webkit-border-radius: 4px 0px 0px 4px;
			border-radius: 4px 0px 0px 4px;
			overflow: hidden;
		}
		#tabs-left .ui-tabs-nav li.ui-tabs-selected,
		#tabs-left .ui-tabs-nav li.ui-state-active {
			border-right: 1px solid transparent;
		}
		#tabs-left .ui-tabs-nav li a {
			float: right;
			width: 100%;
			text-align: right;
			font-size: small;
		}
		#tabs-left .ui-tabs-panel {
			height: 40em;
		}
		.ui-widget.ui-widget-content {
			border: 0;
		}
	</style>
	<style type="text/css" id="orderArea">

		table {
			width: 100%;
			border-collapse: collapse;
		}

		table, th, td {
			border: 1px solid black;
		}

		td {
			text-align: center;
		}

		td.text-right {
			text-align: right;
			padding-right: 10px;
		}

		td.bg-orange {
			background-color: orange;
		}

		td.bg-aquamarine {
			background-color: aquamarine;
		}

		td.bg-yellow {
			background-color: yellow;
		}

		tr.qty {
			height: 20px;
			background-color: cornsilk;
		}

		img.thumbnail {
			width: 60px;
			height: 120px;
		}

		div.qty {
			height: 20px;
			width: 100%;
			background-color: cornsilk;
		}

		div.design-code {
			background-color: aquamarine;
			color: darkslategrey;
			font-size: small;
		}

		div.design-sub-code {
			background-color: gold;
			color: darkslategrey;
			font-size: x-small;
		}

		.text-red {
			color: red;
		}

		.text-center {
			text-align: center;
		}

		.text-right {
			text-align: right;
		}

		a {
			text-decoration: none !important;
		}

		#previewLayer {
			border: 1px solid;
			padding: 10px;
			box-shadow: 5px 5px 8px gray;
		}

		.template-tab > div {
			padding-bottom: 20px;
			text-align: center;
		}
	</style>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
</head>

<body>

<div id="tabs-left">
	<ul id="left-menu">
		<li><a href="#tabs-oderlist"><b>발주서</b></a></li>
	</ul>
	<div id="tabs-oderlist">
		<div id="print-area">
			<table>
				<colgroup>
					<col style="width: 40%">
					<col style="width: 15%">
					<col style="width: 15%">
					<col style="width: 15%">
					<col style="width: 15%">
				</colgroup>
				<tbody>
				<tr>
					<th rowspan="2"><h3>디팍스 매장 발주서</h3></th>
					<th>매장명</th>
					<th>발주날짜</th>
					<th>출고날짜</th>
					<th>확인</th>
				</tr>
				<tr>
					<td><p id="shop">홍대2호점</p></td>
					<td><p id="orderDate">5월2일</p></td>
					<td></td>
					<td></td>
				</tr>
				</tbody>
			</table>

			<br>

			<table>
				<colgroup>
					<col style="width: 20%">
					<col style="width: 20%">
					<col style="width: 20%">
					<col style="width: 20%">
					<col style="width: 20%">
				</colgroup>
				<thead>
				<tr>
					<th>종류</th>
					<th>품목코드</th>
					<th>기종</th>
					<th>수량</th>
					<th>검수</th>
				</tr>
				</thead>
				<tbody id="order-list">

				</tbody>
			</table>
			<table>
				<colgroup>
					<col style="width: 20%">
					<col style="width: 20%">
					<col style="width: 20%">
					<col style="width: 20%">
					<col style="width: 20%">
				</colgroup>
				<tbody>
				<tr>
					<td colspan="3">인쇄수량</td>
					<td class="bg-yellow text-right"><p id="totalCaseQuantity">235</p></td>
					<td></td>
				</tr>
				<tr>
					<td colspan="3" class="bg-orange">총 수량(인쇄+소모품)</td>
					<td colspan="2" class="bg-orange text-right"><p id="totalQuantity">330</p></td>
				</tr>
				<tr>
					<td colspan="3" class="bg-orange">총 금액(VAT포함)</td>
					<td colspan="2" class="bg-orange text-right"><p id="totalPrice">2,542,650</p></td>
				</tr>
				</tbody>
				<tfoot>
				</tfoot>
			</table>
			<br>
		</div>
	</div>
</div>

<br>

<div>
	<button type="button" id="btnPrint" class="ui-button ui-widget ui-corner-all">발주서 인쇄</button>
</div>

<div id="previewLayer" style="background-color: whitesmoke; position: absolute; top: 100px; left: 200px; display: none;">
	<div></div>
	<p class="text-center"><button type="button" id="previewClose" class="ui-button ui-widget ui-corner-all">닫기</button></p>
</div>

<script type="text/javascript">
	$(document).ready(function () {
		$('#tabs-left').tabs();

		var $previewLayer = $('#previewLayer');

		$('#print-area a').click(function (event) {
			event.preventDefault();

//			var left = ( $(window).scrollLeft() + ( $(window).width() - $previewLayer.width()) / 2 );
//			var top = ( $(window).scrollTop() + ( $(window).height() - $previewLayer.height()) / 2 );
//			$previewLayer.css("top", top);
//			$previewLayer.css("left", left);

			var templateDevice = $(this).attr('href');
			$previewLayer.find('div').html($(templateDevice).html());
			$previewLayer.show();
		});

		$('#previewClose').click(function (event) {
			event.preventDefault();
			$previewLayer.hide();
		});

		$('#btnPrint').click(function () {
			printElement('<div>' + $('#print-area').html() + '</div>');
		});

		$('button[name="templatePrint"]').click(function () {
		    var tabId = $(this).data('tabId');
			printElement('<table>' + $(tabId).html() + '</table>');
		});

		function printElement(txt) {
			var mywindow = window.open('', 'PRINT', 'height=800,width=800');

			mywindow.document.write('<html><head><title>발주서</title><style>');
			mywindow.document.write($('#orderArea').text());
			mywindow.document.write('</style></head><body>');
			mywindow.document.write(txt);
			mywindow.document.write('</body></html>');

			mywindow.document.close(); // necessary for IE >= 10
			mywindow.focus(); // necessary for IE >= 10*/

//		mywindow.print();
//		mywindow.close();

			return true;
		}


	});

</script>
</body>
</html>